{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import Axios from\"axios\";import\"./commentitem.css\";import usercontext from\"../context/usercontext\";import Listcomment from\"./listcomment\";import _ from\"lodash\";import Loading from\"./pacmanloading\";import ClipLoaderMycoment from\"./clipLoaderMycoment\";import{v4 as uuidv4}from\"uuid\";import Modalimage from\"./Modalimage\";var Commentitem=function Commentitem(_ref){var postid=_ref.postid;var _useContext=useContext(usercontext),user=_useContext.user,setUser=_useContext.setUser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imagecomment=_useState2[0],Setimagecomment=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),imagesFile=_useState4[0],setImagesFile=_useState4[1];//สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),files=_useState6[0],Setfiles=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),commentmore=_useState8[0],Setcommentmore=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),showcommentall=_useState10[0],Setshowcommentall=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),hidebutton=_useState12[0],Sethidebutton=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),click=_useState14[0],Setclick=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),showdelete=_useState16[0],Setshowdelete=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),showedit=_useState18[0],Setshowedit=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),item=_useState20[0],Setitem=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),checkedittext=_useState22[0],Setcheckedittext=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),fuck=_useState24[0],Setfuck=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),loading=_useState26[0],Setloading=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),data=_useState28[0],Setdata=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),show=_useState30[0],Setshow=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),error=_useState32[0],Seterror=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),textcomment=_useState34[0],Settextcomment=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),photourl=_useState36[0],Setphotourl=_useState36[1];var _useState37=useState(),_useState38=_slicedToArray(_useState37,2),photopublic_id=_useState38[0],Setphotopublic_id=_useState38[1];var history=useHistory();var uuid=uuidv4();// ฟังก์ชันอัพโหลดไฟล์\nvar FileUpload=function FileUpload(event){event.preventDefault();// ใส่ไว้ไม่ให้ refresh หน้าเว็บ\nsetImagesFile([]);var myfuck=[];var files=[];var date=new Date();if(imagecomment){imagecomment.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios({method:\"get\",url:doc.url,responseType:\"blob\"});case 2:response=_context.sent;_context.next=5;return myfuck.push(new File([response.data],\"filename\".concat(uuidv4(),\".png\"),{type:response.data.type,lastModified:date}));case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());}setTimeout(function(){if(myfuck){myfuck.forEach(function(doc){files.push(doc);});}var filesnew=[].concat(files,_toConsumableArray(fuck),_toConsumableArray(event.target.files));Setfiles([].concat(files,_toConsumableArray(fuck),_toConsumableArray(event.target.files)));Setfuck(function(prevState){return[].concat(_toConsumableArray(prevState),_toConsumableArray(event.target.files));});Seterror();var _loop=function _loop(){var reader=new FileReader();//ใช้ Class  FileReader เป็นตัวอ่านไฟล์\nreader.readAsDataURL(filesnew[i]);//เป็นคำสั่งสำหรับการแปลง url มาเป็น file\nreader.onloadend=function(){// ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\nsetImagesFile(function(prevState){return[].concat(_toConsumableArray(prevState),[reader.result]);});//  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\n};};for(var i=0;i<filesnew.length;i++){_loop();}},50);};var handledeleteimage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(index){var date,myFile;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{if(imagesFile){console.log(\"b\");imagesFile.splice(index,1);setImagesFile(_toConsumableArray(imagesFile));}if(imagesFile&&imagesFile.length===0){setImagesFile();}if(fuck){console.log(\"c\");fuck.splice(index,1);Setfuck(_toConsumableArray(fuck));}date=new Date();myFile=[];if(imagecomment){imagecomment.forEach(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(doc){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(doc.url);case 2:response=_context2.sent;_context2.next=5;return response.blob();case 5:data=_context2.sent;myFile.push(new File([data],\"filename\".concat(uuidv4(),\".png\"),{type:\"image/png\",lastModified:date}));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref4.apply(this,arguments);};}());Setfiles(myFile);}if(files){console.log(\"d\");files.splice(index,1);Setfiles(_toConsumableArray(files));}}catch(err){console.log(err);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handledeleteimage(_x2){return _ref3.apply(this,arguments);};}();var handlecomment=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var formdata,useruid,sentcomment,sendnoti;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;if(!user){_context4.next=30;break;}formdata=new FormData();useruid=user.uid;_.forEach(files,function(file){formdata.append(\"photocomment\",file);});formdata.append(\"textcomment\",textcomment);formdata.append(\"username\",data[0].username);formdata.append(\"userid\",user.uid);formdata.append(\"photourl\",photourl);formdata.append(\"photopublic_id\",photopublic_id);if(!(!files&&!textcomment)){_context4.next=12;break;}return _context4.abrupt(\"return\",Seterror(\"กรุณาใส่ข้อความหรือรูปภาพ\"));case 12:if(!(files&&files.length===0)){_context4.next=14;break;}return _context4.abrupt(\"return\",Seterror(\"กรุณาใส่ข้อความหรือรูปภาพ\"));case 14:Setloading(true);_context4.next=17;return Axios.post(\"https://monkeyfruad01.herokuapp.com/post/comment/\".concat(postid),formdata);case 17:sentcomment=_context4.sent;_context4.next=20;return Axios.post(\"https://monkeyfruad01.herokuapp.com/post/notificationnonread/\".concat(postid,\"/\").concat(user.uid));case 20:sendnoti=_context4.sent;Setclick(sentcomment);Settextcomment(\"\");Setfuck([]);setImagesFile();Setfiles();Seterror();Setloading(false);_context4.next=31;break;case 30:history.push({pathname:\"/login\",search:\"?login=false\",state:{login:false}});case 31:_context4.next=36;break;case 33:_context4.prev=33;_context4.t0=_context4[\"catch\"](0);_context4.t0&&Seterror(_context4.t0.response.data.msg);case 36:case\"end\":return _context4.stop();}}},_callee4,null,[[0,33]]);}));return function handlecomment(){return _ref5.apply(this,arguments);};}();var handlemorecomment=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:try{Setshowcommentall(true);Sethidebutton(false);}catch(err){console.log(err);}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function handlemorecomment(){return _ref6.apply(this,arguments);};}();var handledeletetorerender=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:try{Setshowdelete(uuid);}catch(err){console.log(err);}case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function handledeletetorerender(){return _ref7.apply(this,arguments);};}();var handleedittorerender=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:try{Setshowedit(uuid);}catch(err){console.log(err);}case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function handleedittorerender(){return _ref8.apply(this,arguments);};}();var gg=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var getcommentall,nameuser,profiledata;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return Axios.get(\"https://monkeyfruad01.herokuapp.com/post/commentmore/\".concat(postid));case 3:getcommentall=_context8.sent;Setcommentmore(getcommentall.data.item);if(!user){_context8.next=15;break;}_context8.next=8;return Axios.post(\"https://monkeyfruad01.herokuapp.com/user/userid\",{result:user});case 8:nameuser=_context8.sent;Setdata(nameuser.data.item);_context8.next=12;return Axios.post(\"https://monkeyfruad01.herokuapp.com/user/session\",{user:user});case 12:profiledata=_context8.sent;Setphotourl(profiledata.data.data.photoURL.url);Setphotopublic_id(profiledata.data.data.photoURL.public_id);case 15:_context8.next=20;break;case 17:_context8.prev=17;_context8.t0=_context8[\"catch\"](0);console.log(_context8.t0);case 20:case\"end\":return _context8.stop();}}},_callee8,null,[[0,17]]);}));return function gg(){return _ref9.apply(this,arguments);};}();useEffect(function(){gg();},[click,showdelete,showedit,postid]);return/*#__PURE__*/_jsxs(\"div\",{children:[showcommentall?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",commentmore?commentmore.map(function(commentmore){return/*#__PURE__*/_jsx(Listcomment,{commentmore:commentmore,handledeletetorerender:handledeletetorerender,handleedittorerender:handleedittorerender});}):null,\" \"]}):/*#__PURE__*/_jsx(\"div\",{children:commentmore?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Listcomment,{commentmore:commentmore[0],handledeletetorerender:handledeletetorerender,handleedittorerender:handleedittorerender}),\" \",/*#__PURE__*/_jsx(Listcomment,{commentmore:commentmore[1],handledeletetorerender:handledeletetorerender,handleedittorerender:handleedittorerender}),\" \",/*#__PURE__*/_jsx(Listcomment,{commentmore:commentmore[2],handledeletetorerender:handledeletetorerender,handleedittorerender:handleedittorerender}),\" \"]}):null}),commentmore&&commentmore.length>3?/*#__PURE__*/_jsxs(\"div\",{children:[hidebutton?/*#__PURE__*/_jsxs(\"button\",{onClick:handlemorecomment,className:\"postother2\",children:[\"\\u0E14\\u0E39\\u0E2D\\u0E35\\u0E01 \",commentmore.length-3,\" \\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\"]}):null,\" \"]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"post-comment-comments1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-profilecomment-img1\",children:photourl?/*#__PURE__*/_jsx(\"img\",{className:\"img-circle profile-comment1\",src:\"\".concat(photourl)}):/*#__PURE__*/_jsx(\"img\",{className:\"img-circle profile-comment1\",src:\"/img/profile.png\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-section-commment\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-10 col-4\",children:/*#__PURE__*/_jsx(ClipLoaderMycoment,{})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-comment-commentsall\",children:[!imagesFile&&!imagecomment?/*#__PURE__*/_jsx(\"div\",{className:\"container-img-holder-imgpreview1\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"uploadprove1\",src:\"/img/addimg.png\"}),/*#__PURE__*/_jsx(\"input\",{id:\"FileInput\",className:\"uploadspostcomment\",type:\"file\",onChange:FileUpload,multiple:true,accept:\"image/png, image/jpeg , image/jpg\"})]})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"post-writecommemt\",controlId:\"exampleForm.ControlTextarea1\",children:/*#__PURE__*/_jsx(\"textarea\",{rows:\"3\",cols:\"15\",className:\"inputcomment1\",placeholder:\"\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19...\",value:textcomment,onChange:function onChange(e){Settextcomment(e.target.value);Seterror();}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"postbuttonsendss\",children:/*#__PURE__*/_jsx(\"button\",{className:\"postbuttonsends1\",onClick:function onClick(){return handlecomment();},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-paper-plane\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"imgcommentitempost1\",children:[imagesFile?imagesFile.map(function(imagePreviewUrl,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"postdelete\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"imgpreviewa1\",alt:\"previewImg\",src:imagePreviewUrl},index),/*#__PURE__*/_jsx(\"span\",{className:\"deleteimgposts1\",children:/*#__PURE__*/_jsx(\"img\",{className:\"deleteimgposts2\",src:\"/img/delete2.png\",onClick:function onClick(){return handledeleteimage(index);}})})]});}):null,imagesFile||imagecomment?/*#__PURE__*/_jsx(\"div\",{className:\"uploadproveedit\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"uploadproveedit1\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"uploadproveedit2\",src:\"/img/last1.png\"}),/*#__PURE__*/_jsx(\"input\",{id:\"FileInput\",className:\"uploadspostcomment\",type:\"file\",onChange:FileUpload,multiple:true,accept:\"image/png, image/jpeg , image/jpg\"})]})}):/*#__PURE__*/_jsx(\"div\",{})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"h1-postfileerror\",children:error})]})]})]});};export default Commentitem;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/user/components/commentitem.js"],"names":["React","useEffect","useState","useContext","useHistory","Axios","usercontext","Listcomment","_","Loading","ClipLoaderMycoment","v4","uuidv4","Modalimage","Commentitem","postid","user","setUser","imagecomment","Setimagecomment","imagesFile","setImagesFile","files","Setfiles","commentmore","Setcommentmore","showcommentall","Setshowcommentall","hidebutton","Sethidebutton","click","Setclick","showdelete","Setshowdelete","showedit","Setshowedit","item","Setitem","checkedittext","Setcheckedittext","fuck","Setfuck","loading","Setloading","data","Setdata","show","Setshow","error","Seterror","textcomment","Settextcomment","photourl","Setphotourl","photopublic_id","Setphotopublic_id","history","uuid","FileUpload","event","preventDefault","myfuck","date","Date","map","doc","method","url","responseType","response","push","File","type","lastModified","setTimeout","forEach","filesnew","target","prevState","reader","FileReader","readAsDataURL","i","onloadend","result","length","handledeleteimage","index","console","log","splice","myFile","fetch","blob","err","handlecomment","formdata","FormData","useruid","uid","file","append","username","post","sentcomment","sendnoti","pathname","search","state","login","msg","handlemorecomment","handledeletetorerender","handleedittorerender","gg","get","getcommentall","nameuser","profiledata","photoURL","public_id","e","value","imagePreviewUrl"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\nimport \"./commentitem.css\";\r\nimport usercontext from \"../context/usercontext\";\r\nimport Listcomment from \"./listcomment\";\r\nimport _ from \"lodash\";\r\nimport Loading from \"./pacmanloading\";\r\nimport ClipLoaderMycoment from \"./clipLoaderMycoment\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Modalimage from \"./Modalimage\";\r\n\r\nconst Commentitem = ({ postid }) => {\r\n  let { user, setUser } = useContext(usercontext);\r\n  const [imagecomment, Setimagecomment] = useState();\r\n  const [imagesFile, setImagesFile] = useState(); //สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\r\n  const [files, Setfiles] = useState();\r\n  const [commentmore, Setcommentmore] = useState();\r\n  const [showcommentall, Setshowcommentall] = useState();\r\n  const [hidebutton, Sethidebutton] = useState(true);\r\n  const [click, Setclick] = useState();\r\n  const [showdelete, Setshowdelete] = useState();\r\n  const [showedit, Setshowedit] = useState();\r\n  const [item, Setitem] = useState([]);\r\n  const [checkedittext, Setcheckedittext] = useState(false);\r\n  const [fuck, Setfuck] = useState([]);\r\n\r\n  const [loading, Setloading] = useState();\r\n  const [data, Setdata] = useState();\r\n  const [show, Setshow] = useState();\r\n  const [error, Seterror] = useState();\r\n\r\n  const [textcomment, Settextcomment] = useState(\"\");\r\n  const [photourl, Setphotourl] = useState();\r\n  const [photopublic_id, Setphotopublic_id] = useState();\r\n  let history = useHistory();\r\n\r\n  let uuid = uuidv4();\r\n\r\n  // ฟังก์ชันอัพโหลดไฟล์\r\n  const FileUpload = (event) => {\r\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\r\n\r\n    setImagesFile([]);\r\n    var myfuck = [];\r\n    var files = [];\r\n    let date = new Date();\r\n    if (imagecomment) {\r\n      imagecomment.map(async (doc) => {\r\n        const response = await Axios({\r\n          method: \"get\",\r\n          url: doc.url,\r\n          responseType: \"blob\",\r\n        });\r\n        await myfuck.push(\r\n          new File([response.data], `filename${uuidv4()}.png`, {\r\n            type: response.data.type,\r\n            lastModified: date,\r\n          })\r\n        );\r\n      });\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (myfuck) {\r\n        myfuck.forEach((doc) => {\r\n          files.push(doc);\r\n        });\r\n      }\r\n\r\n      let filesnew = [...files, ...fuck, ...event.target.files];\r\n\r\n      Setfiles([...files, ...fuck, ...event.target.files]);\r\n      Setfuck((prevState) => [...prevState, ...event.target.files]);\r\n      Seterror();\r\n\r\n      for (var i = 0; i < filesnew.length; i++) {\r\n        let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\r\n        reader.readAsDataURL(filesnew[i]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\r\n        reader.onloadend = () => {\r\n          // ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\r\n          setImagesFile((prevState) => [...prevState, reader.result]);\r\n          //  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\r\n        };\r\n      }\r\n    }, 50);\r\n  };\r\n\r\n  const handledeleteimage = async (index) => {\r\n    try {\r\n      if (imagesFile) {\r\n        console.log(\"b\");\r\n        imagesFile.splice(index, 1);\r\n        setImagesFile([...imagesFile]);\r\n      }\r\n      if (imagesFile && imagesFile.length === 0) {\r\n        setImagesFile();\r\n      }\r\n\r\n      if (fuck) {\r\n        console.log(\"c\");\r\n        fuck.splice(index, 1);\r\n        Setfuck([...fuck]);\r\n      }\r\n\r\n      let date = new Date();\r\n      var myFile = [];\r\n      if (imagecomment) {\r\n        imagecomment.forEach(async (doc) => {\r\n          const response = await fetch(doc.url);\r\n          const data = await response.blob();\r\n          myFile.push(\r\n            new File([data], `filename${uuidv4()}.png`, {\r\n              type: \"image/png\",\r\n              lastModified: date,\r\n            })\r\n          );\r\n        });\r\n        Setfiles(myFile);\r\n      }\r\n      if (files) {\r\n        console.log(\"d\");\r\n        files.splice(index, 1);\r\n        Setfiles([...files]);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handlecomment = async () => {\r\n    try {\r\n      if (user) {\r\n        let formdata = new FormData();\r\n        let useruid = user.uid;\r\n        _.forEach(files, (file) => {\r\n          formdata.append(\"photocomment\", file);\r\n        });\r\n        formdata.append(\"textcomment\", textcomment);\r\n        formdata.append(\"username\", data[0].username);\r\n        formdata.append(\"userid\", user.uid);\r\n        formdata.append(\"photourl\", photourl);\r\n        formdata.append(\"photopublic_id\", photopublic_id);\r\n        if (!files && !textcomment) {\r\n          return Seterror(\"กรุณาใส่ข้อความหรือรูปภาพ\");\r\n        }\r\n        if (files && files.length === 0) {\r\n          return Seterror(\"กรุณาใส่ข้อความหรือรูปภาพ\");\r\n        }\r\n        Setloading(true);\r\n        const sentcomment = await Axios.post(\r\n          `https://monkeyfruad01.herokuapp.com/post/comment/${postid}`,\r\n          formdata\r\n        );\r\n        const sendnoti = await Axios.post(\r\n          `https://monkeyfruad01.herokuapp.com/post/notificationnonread/${postid}/${user.uid}`\r\n        );\r\n\r\n        Setclick(sentcomment);\r\n        Settextcomment(\"\");\r\n        Setfuck([]);\r\n        setImagesFile();\r\n        Setfiles();\r\n        Seterror();\r\n        Setloading(false);\r\n      } else {\r\n        history.push({\r\n          pathname: \"/login\",\r\n          search: `?login=false`,\r\n          state: {\r\n            login: false,\r\n          },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      err && Seterror(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const handlemorecomment = async () => {\r\n    try {\r\n      Setshowcommentall(true);\r\n      Sethidebutton(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handledeletetorerender = async () => {\r\n    try {\r\n      Setshowdelete(uuid);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleedittorerender = async () => {\r\n    try {\r\n      Setshowedit(uuid);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const gg = async () => {\r\n    try {\r\n      const getcommentall = await Axios.get(\r\n        `https://monkeyfruad01.herokuapp.com/post/commentmore/${postid}`\r\n      );\r\n      Setcommentmore(getcommentall.data.item);\r\n      if (user) {\r\n        const nameuser = await Axios.post(\r\n          \"https://monkeyfruad01.herokuapp.com/user/userid\",\r\n          {\r\n            result: user,\r\n          }\r\n        );\r\n        Setdata(nameuser.data.item);\r\n\r\n        var profiledata = await Axios.post(\r\n          \"https://monkeyfruad01.herokuapp.com/user/session\",\r\n          {\r\n            user: user,\r\n          }\r\n        );\r\n        Setphotourl(profiledata.data.data.photoURL.url);\r\n        Setphotopublic_id(profiledata.data.data.photoURL.public_id);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    gg();\r\n  }, [click, showdelete, showedit, postid]);\r\n\r\n  return (\r\n    <div>\r\n      {showcommentall ? (\r\n        <div>\r\n          {\" \"}\r\n          {commentmore\r\n            ? commentmore.map((commentmore) => {\r\n                return (\r\n                  <Listcomment\r\n                    commentmore={commentmore}\r\n                    handledeletetorerender={handledeletetorerender}\r\n                    handleedittorerender={handleedittorerender}\r\n                  />\r\n                );\r\n              })\r\n            : null}{\" \"}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {commentmore ? (\r\n            <div>\r\n              <Listcomment\r\n                commentmore={commentmore[0]}\r\n                handledeletetorerender={handledeletetorerender}\r\n                handleedittorerender={handleedittorerender}\r\n              />{\" \"}\r\n              <Listcomment\r\n                commentmore={commentmore[1]}\r\n                handledeletetorerender={handledeletetorerender}\r\n                handleedittorerender={handleedittorerender}\r\n              />{\" \"}\r\n              <Listcomment\r\n                commentmore={commentmore[2]}\r\n                handledeletetorerender={handledeletetorerender}\r\n                handleedittorerender={handleedittorerender}\r\n              />{\" \"}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n\r\n      {commentmore && commentmore.length > 3 ? (\r\n        <div>\r\n          {hidebutton ? (\r\n            <button onClick={handlemorecomment} className=\"postother2\">\r\n              ดูอีก {commentmore.length - 3} ความคิดเห็น\r\n            </button>\r\n          ) : null}{\" \"}\r\n        </div>\r\n      ) : null}\r\n\r\n      <div className=\"post-comment-comments1\">\r\n        <div className=\"post-profilecomment-img1\">\r\n          {photourl ? (\r\n            <img className=\"img-circle profile-comment1\" src={`${photourl}`} />\r\n          ) : (\r\n            <img\r\n              className=\"img-circle profile-comment1\"\r\n              src=\"/img/profile.png\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"post-section-commment\">\r\n          {loading ? (\r\n            <div className=\"col-lg-10 col-4\">\r\n              <ClipLoaderMycoment />\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div className=\"post-comment-commentsall\">\r\n                {!imagesFile && !imagecomment ? (\r\n                  <div className=\"container-img-holder-imgpreview1\">\r\n                    <label>\r\n                      <img className=\"uploadprove1\" src=\"/img/addimg.png\" />\r\n                      <input\r\n                        id=\"FileInput\"\r\n                        className=\"uploadspostcomment\"\r\n                        type=\"file\"\r\n                        onChange={FileUpload}\r\n                        multiple\r\n                        accept=\"image/png, image/jpeg , image/jpg\"\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n\r\n                <div\r\n                  className=\"post-writecommemt\"\r\n                  controlId=\"exampleForm.ControlTextarea1\"\r\n                >\r\n                  <textarea\r\n                    rows=\"3\"\r\n                    cols=\"15\"\r\n                    className=\"inputcomment1\"\r\n                    placeholder=\"เขียนความคิดเห็น...\"\r\n                    value={textcomment}\r\n                    onChange={(e) => {\r\n                      Settextcomment(e.target.value);\r\n                      Seterror();\r\n                    }}\r\n                  />\r\n                  {/* {loading ? <div><ClipLoader /></div> : null } */}\r\n                </div>\r\n\r\n                <div>\r\n                  <div className=\"postbuttonsendss\">\r\n                    <button\r\n                      className=\"postbuttonsends1\"\r\n                      onClick={() => handlecomment()}\r\n                    >\r\n                      <i className=\"fa fa-paper-plane\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"imgcommentitempost1\">\r\n                {imagesFile\r\n                  ? imagesFile.map((imagePreviewUrl, index) => {\r\n                      return (\r\n                        <div className=\"postdelete\">\r\n                          <img\r\n                            key={index}\r\n                            className=\"imgpreviewa1\"\r\n                            alt=\"previewImg\"\r\n                            src={imagePreviewUrl}\r\n                          />\r\n                          <span className=\"deleteimgposts1\">\r\n                            <img\r\n                              className=\"deleteimgposts2\"\r\n                              src=\"/img/delete2.png\"\r\n                              onClick={() => handledeleteimage(index)}\r\n                            />\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  : null}\r\n                {imagesFile || imagecomment ? (\r\n                  <div className=\"uploadproveedit\">\r\n                    <label className=\"uploadproveedit1\">\r\n                      <img className=\"uploadproveedit2\" src=\"/img/last1.png\" />\r\n                      <input\r\n                        id=\"FileInput\"\r\n                        className=\"uploadspostcomment\"\r\n                        type=\"file\"\r\n                        onChange={FileUpload}\r\n                        multiple\r\n                        accept=\"image/png, image/jpeg , image/jpg\"\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          <h1 className=\"h1-postfileerror\">{error}</h1>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Commentitem;\r\n"]},"metadata":{},"sourceType":"module"}