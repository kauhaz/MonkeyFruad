{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import Axios from\"axios\";import usercontext from\"../context/usercontext\";import\"./Listcomment2.css\";import*as moment from\"moment\";import\"moment/locale/th\";import _ from\"lodash\";import ClipLoaderEdit from\"./clipLoaderEdit\";import{v4 as uuidv4}from\"uuid\";import Modalimage from\"./Modalimage\";import Modaldelete from\"./Modaldelete\";var Listcomment2=function Listcomment2(_ref){var commentmore=_ref.commentmore,handledeletetorerender=_ref.handledeletetorerender,handleedittorerender=_ref.handleedittorerender;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imagesFile=_useState2[0],setImagesFile=_useState2[1];//สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],Setfiles=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],Seterror=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isActive=_useState8[0],setIsActive=_useState8[1];var onClick=function onClick(){return setIsActive(!isActive);};var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),item=_useState10[0],Setitem=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),checkedittext=_useState12[0],Setcheckedittext=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),textcomment=_useState14[0],Settextcomment=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),edittextcomment=_useState16[0],Setedittextcomment=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),imagecomment=_useState18[0],Setimagecomment=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],Setloading=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),fuck=_useState22[0],Setfuck=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isopen=_useState24[0],Setisopen=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),imagemodal=_useState26[0],Setimagemodal=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),modalcommentid=_useState28[0],Setmodalcommentid=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),modalcommentmore=_useState30[0],Setmodalcommentmore=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),isOpenModalDelete=_useState32[0],SetisOpenModalDelete=_useState32[1];var _useContext=useContext(usercontext),user=_useContext.user,setUser=_useContext.setUser;var handleopenmodal=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Setisopen(true);case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleopenmodal(){return _ref2.apply(this,arguments);};}();var handleclosemodal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Setisopen(false);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleclosemodal(){return _ref3.apply(this,arguments);};}();var handlemodalopen=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:SetisOpenModalDelete(true);case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handlemodalopen(){return _ref4.apply(this,arguments);};}();var handlemodalclose=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:SetisOpenModalDelete(false);case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function handlemodalclose(){return _ref5.apply(this,arguments);};}();var FileUpload=function FileUpload(event){event.preventDefault();// ใส่ไว้ไม่ให้ refresh หน้าเว็บ\nsetImagesFile([]);var myfuck=[];var files=[];var date=new Date();if(imagecomment){imagecomment.map(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(doc){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Axios({method:\"get\",url:doc.url,responseType:\"blob\"});case 2:response=_context5.sent;_context5.next=5;return myfuck.push(new File([response.data],\"filename\".concat(uuidv4(),\".png\"),{type:response.data.type,lastModified:date}));case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x){return _ref6.apply(this,arguments);};}());}setTimeout(function(){if(myfuck){myfuck.forEach(function(doc){files.push(doc);});}var filesnew=[].concat(files,_toConsumableArray(fuck),_toConsumableArray(event.target.files));Setfiles([].concat(files,_toConsumableArray(fuck),_toConsumableArray(event.target.files)));Setfuck(function(prevState){return[].concat(_toConsumableArray(prevState),_toConsumableArray(event.target.files));});Seterror();var _loop=function _loop(){var reader=new FileReader();//ใช้ Class  FileReader เป็นตัวอ่านไฟล์\nreader.readAsDataURL(filesnew[i]);//เป็นคำสั่งสำหรับการแปลง url มาเป็น file\nreader.onloadend=function(){// ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\nsetImagesFile(function(prevState){return[].concat(_toConsumableArray(prevState),[reader.result]);});//  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\n};};for(var i=0;i<filesnew.length;i++){_loop();}},50);};var handledeleteimage=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(index){var date,myFile;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:try{if(imagecomment){imagecomment.splice(index,1);Setimagecomment(_toConsumableArray(imagecomment));}if(imagecomment&&imagecomment.length===0){Setimagecomment();}if(imagesFile){imagesFile.splice(index,1);setImagesFile(_toConsumableArray(imagesFile));}if(imagesFile&&imagesFile.length===0){setImagesFile();}if(fuck){fuck.splice(index,1);Setfuck(_toConsumableArray(fuck));}date=new Date();myFile=[];if(imagecomment){imagecomment.forEach(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(doc){var response,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(doc.url);case 2:response=_context6.sent;_context6.next=5;return response.blob();case 5:data=_context6.sent;myFile.push(new File([data],\"filename\".concat(uuidv4(),\".png\"),{type:\"image/png\",lastModified:date}));case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3){return _ref8.apply(this,arguments);};}());Setfiles(myFile);}if(files){console.log(\"d\");files.splice(index,1);Setfiles(_toConsumableArray(files));}}catch(err){console.log(err);}case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function handledeleteimage(_x2){return _ref7.apply(this,arguments);};}();var edit=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var myfuck,date;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:Setcheckedittext(true);setIsActive(false);myfuck=[];date=new Date();if(imagecomment){imagecomment.map(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(doc){var response;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return Axios({method:\"get\",url:doc.url,responseType:\"blob\"});case 2:response=_context8.sent;_context8.next=5;return myfuck.push(new File([response.data],\"filename\".concat(uuidv4(),\".png\"),{type:response.data.type,lastModified:date}));case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x4){return _ref10.apply(this,arguments);};}());}setTimeout(function(){Setfiles([].concat(myfuck));},50);case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function edit(){return _ref9.apply(this,arguments);};}();var handleedit=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(commentid){var formdata,editcomment;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;formdata=new FormData();_.forEach(files,function(file){formdata.append(\"photocomment\",file);});formdata.append(\"edittextcomment\",edittextcomment);formdata.append(\"photocomment\",imagecomment);Setloading(true);_context10.next=8;return Axios.post(\"https://monkeyfruad01.herokuapp.com/post/edit/comment/\".concat(commentid),formdata);case 8:editcomment=_context10.sent;handleedittorerender();Setfuck([]);setImagesFile();Setfiles();Setcheckedittext(false);Setloading(false);_context10.next=20;break;case 17:_context10.prev=17;_context10.t0=_context10[\"catch\"](0);console.log(_context10.t0);case 20:case\"end\":return _context10.stop();}}},_callee10,null,[[0,17]]);}));return function handleedit(_x5){return _ref11.apply(this,arguments);};}();var gg=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:try{if(commentmore){Setedittextcomment(commentmore.textcomment);Setimagecomment(commentmore.photocomment);}}catch(err){console.log(err);}case 1:case\"end\":return _context11.stop();}}},_callee11);}));return function gg(){return _ref12.apply(this,arguments);};}();useEffect(function(){gg();},[commentmore]);return/*#__PURE__*/_jsx(\"div\",{children:commentmore?/*#__PURE__*/_jsxs(\"div\",{className:\"mypostcommentrow\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"vl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypost-comment-img1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-mypost-comment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mypost-profilecomment-img1\",children:commentmore.photoURL?/*#__PURE__*/_jsx(\"img\",{className:\"img-circle profile-listcomment2\",src:\"\".concat(commentmore.photoURL.url)}):/*#__PURE__*/_jsx(\"img\",{className:\"img-circle profile-listcomment2\",src:\"/img/profile.png\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypost-comment-name1\",children:[commentmore?\"@\":null,commentmore.username,/*#__PURE__*/_jsx(\"div\",{className:\"none-listcomment2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"mypost-comment-time1\",children:[\" \",moment(new Date(commentmore.datetime.seconds*1000)).startOf().fromNow(),\" \"]})]}),user&&commentmore.userid==user.uid?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu-containermypostcommentsetting\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:onClick,className:\"mypostcommentbuttonsetting\",children:/*#__PURE__*/_jsx(\"img\",{className:\"mypostcommentimg-setting\",src:\"/img/setting.png\",alt:\"avatar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mypostcommentmenusetting \".concat(isActive?\"active\":\"inactive\"),children:/*#__PURE__*/_jsxs(\"ul\",{className:\"ul-mypostcommentmenusetting\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"li-mypostcommentmenusetting\",children:/*#__PURE__*/_jsx(\"a\",{className:\"a-mypostcommentmenusetting\",onClick:function onClick(){return edit(commentmore.commentid);},children:\"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E04\\u0E2D\\u0E21\\u0E40\\u0E21\\u0E19\\u0E15\\u0E4C\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"li-mypostcommentmenusetting\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"a-mypostcommentmenusetting\",onClick:function onClick(){return Setmodalcommentid(commentmore.commentid),Setmodalcommentmore(commentmore),setIsActive(false),handlemodalopen();},children:[\" \",\"\\u0E25\\u0E1A\\u0E04\\u0E2D\\u0E21\\u0E40\\u0E21\\u0E19\\u0E15\\u0E4C\",\" \"]})})]})})]}),/*#__PURE__*/_jsx(Modaldelete,{text:\"deletecomment\",openmodal:isOpenModalDelete,handlemodalclose:handlemodalclose,modalcommentid:modalcommentid,modalcommentmore:modalcommentmore,setIsActive:setIsActive,Setfuck:Setfuck,setImagesFile:setImagesFile,Setfiles:Setfiles,handledeletetorerender:handledeletetorerender})]}):null]}),/*#__PURE__*/_jsx(\"br\",{}),loading?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ClipLoaderEdit,{loading:loading})}):checkedittext?/*#__PURE__*/_jsxs(\"div\",{className:\"commentmypost\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"commentboxmypost\",children:[!imagecomment&&!imagesFile?/*#__PURE__*/_jsx(\"div\",{className:\"container-img-holder-imgpreview1\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"uploadprovemypost1\",src:\"/img/addimg.png\"}),/*#__PURE__*/_jsx(\"input\",{id:\"FileInput\",className:\"uploadspostcomment\",type:\"file\",onChange:FileUpload,multiple:true,accept:\"image/png, image/jpeg , image/jpg\"})]})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"mypost-writecommemt\",controlId:\"exampleForm.ControlTextarea1\",children:/*#__PURE__*/_jsx(\"textarea\",{rows:\"3\",cols:\"15\",className:\"inputlistcommentmypost2\",placeholder:\"\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19...\",value:edittextcomment,onChange:function onChange(e){Setedittextcomment(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"buttoncommentmypostsave1\",children:/*#__PURE__*/_jsx(\"button\",{className:\"buttoncommentmypostsave2\",onClick:function onClick(){return handleedit(commentmore.commentid);},children:\"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"imgcommentitemmypost\",children:[imagesFile?imagesFile.map(function(imagePreviewUrl,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"postdeletemypost\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"imgpreviewmypost1\",alt:\"previewImg\",src:imagePreviewUrl},index),/*#__PURE__*/_jsx(\"span\",{className:\"deleteimgmyposts1\",children:/*#__PURE__*/_jsx(\"img\",{className:\"deleteimgmyposts2\",src:\"/img/delete2.png\",onClick:function onClick(){return handledeleteimage(index);}})})]});}):imagecomment?imagecomment?imagecomment.map(function(doc,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"postdeletemypost\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"imgpreviewmypost1\",src:doc.url,onClick:function onClick(){return Setimagemodal(doc.url),handleopenmodal();}}),/*#__PURE__*/_jsx(\"span\",{className:\"deleteimgmyposts1\",children:/*#__PURE__*/_jsx(\"img\",{className:\"deleteimgmyposts2\",src:\"/img/delete2.png\",onClick:function onClick(){return handledeleteimage(index);}})})]});}):null:null,imagecomment||imagesFile?/*#__PURE__*/_jsxs(\"div\",{className:\"uploadproveeditmyposts\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"uploadproveeditmyposts1\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"uploadproveeditmyposts2\",src:\"/img/last1.png\"}),/*#__PURE__*/_jsx(\"input\",{id:\"FileInput\",className:\"uploadspostcomment\",type:\"file\",onChange:FileUpload,multiple:true,accept:\"image/png, image/jpeg , image/jpg\"})]}),\" \"]}):null]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"mypost-comment-comments2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mypostcomment1\",children:commentmore.textcomment}),/*#__PURE__*/_jsxs(\"div\",{className:\"imglistcommentmypost\",children:[imagecomment?imagecomment.map(function(doc){return/*#__PURE__*/_jsx(\"div\",{className:\"imglistcommentmypost1\",children:/*#__PURE__*/_jsx(\"img\",{className:\"listcommentmypost2\",src:\"\".concat(doc.url),onClick:function onClick(){return Setimagemodal(doc.url),handleopenmodal();}})});}):null,/*#__PURE__*/_jsx(Modalimage,{isopen:isopen,handleopenmodal:handleopenmodal,handleclosemodal:handleclosemodal,imagemodal:imagemodal})]})]})]})]}):null});};export default Listcomment2;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/user/components/Listcomment2.js"],"names":["React","useEffect","useState","useContext","Axios","usercontext","moment","_","ClipLoaderEdit","v4","uuidv4","Modalimage","Modaldelete","Listcomment2","commentmore","handledeletetorerender","handleedittorerender","imagesFile","setImagesFile","files","Setfiles","error","Seterror","isActive","setIsActive","onClick","item","Setitem","checkedittext","Setcheckedittext","textcomment","Settextcomment","edittextcomment","Setedittextcomment","imagecomment","Setimagecomment","loading","Setloading","fuck","Setfuck","isopen","Setisopen","imagemodal","Setimagemodal","modalcommentid","Setmodalcommentid","modalcommentmore","Setmodalcommentmore","isOpenModalDelete","SetisOpenModalDelete","user","setUser","handleopenmodal","handleclosemodal","handlemodalopen","handlemodalclose","FileUpload","event","preventDefault","myfuck","date","Date","map","doc","method","url","responseType","response","push","File","data","type","lastModified","setTimeout","forEach","filesnew","target","prevState","reader","FileReader","readAsDataURL","i","onloadend","result","length","handledeleteimage","index","splice","myFile","fetch","blob","console","log","err","edit","handleedit","commentid","formdata","FormData","file","append","post","editcomment","gg","photocomment","photoURL","username","datetime","seconds","startOf","fromNow","userid","uid","e","value","imagePreviewUrl"],"mappings":"qpBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAO,oBAAP,CACA,MAAO,GAAKC,CAAAA,MAAZ,KAAwB,QAAxB,CACA,MAAO,kBAAP,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,EAAE,GAAIC,CAAAA,MAAf,KAA6B,MAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAIf,IAHJC,CAAAA,WAGI,MAHJA,WAGI,CAFJC,sBAEI,MAFJA,sBAEI,CADJC,oBACI,MADJA,oBACI,eACgCd,QAAQ,EADxC,wCACGe,UADH,eACeC,aADf,eAC4C;AAD5C,eAEsBhB,QAAQ,EAF9B,yCAEGiB,KAFH,eAEUC,QAFV,8BAGsBlB,QAAQ,EAH9B,yCAGGmB,KAHH,eAGUC,QAHV,8BAI4BpB,QAAQ,CAAC,KAAD,CAJpC,yCAIGqB,QAJH,eAIaC,WAJb,eAKJ,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,SAAMD,CAAAA,WAAW,CAAC,CAACD,QAAF,CAAjB,EAAhB,CALI,eAMoBrB,QAAQ,CAAC,EAAD,CAN5B,0CAMGwB,IANH,gBAMSC,OANT,gCAOsCzB,QAAQ,CAAC,KAAD,CAP9C,2CAOG0B,aAPH,gBAOkBC,gBAPlB,gCAQkC3B,QAAQ,EAR1C,2CAQG4B,WARH,gBAQgBC,cARhB,gCAS0C7B,QAAQ,EATlD,2CASG8B,eATH,gBASoBC,kBATpB,gCAUoC/B,QAAQ,EAV5C,2CAUGgC,YAVH,gBAUiBC,eAVjB,gCAW0BjC,QAAQ,EAXlC,2CAWGkC,OAXH,gBAWYC,UAXZ,gCAYoBnC,QAAQ,CAAC,EAAD,CAZ5B,2CAYGoC,IAZH,gBAYSC,OAZT,gCAawBrC,QAAQ,CAAC,KAAD,CAbhC,2CAaGsC,MAbH,gBAaWC,SAbX,gCAcgCvC,QAAQ,EAdxC,2CAcGwC,UAdH,gBAceC,aAdf,gCAgBwCzC,QAAQ,EAhBhD,2CAgBG0C,cAhBH,gBAgBmBC,iBAhBnB,gCAiB4C3C,QAAQ,EAjBpD,2CAiBG4C,gBAjBH,gBAiBqBC,mBAjBrB,gCAkB8C7C,QAAQ,CAAC,KAAD,CAlBtD,2CAkBG8C,iBAlBH,gBAkBsBC,oBAlBtB,gCAoBoB9C,UAAU,CAACE,WAAD,CApB9B,CAoBE6C,IApBF,aAoBEA,IApBF,CAoBQC,OApBR,aAoBQA,OApBR,CAsBJ,GAAMC,CAAAA,eAAe,2FAAG,mIACtBX,SAAS,CAAC,IAAD,CAAT,CADsB,sDAAH,kBAAfW,CAAAA,eAAe,2CAArB,CAGA,GAAMC,CAAAA,gBAAgB,2FAAG,wIACvBZ,SAAS,CAAC,KAAD,CAAT,CADuB,wDAAH,kBAAhBY,CAAAA,gBAAgB,2CAAtB,CAIA,GAAMC,CAAAA,eAAe,2FAAG,wIACtBL,oBAAoB,CAAC,IAAD,CAApB,CADsB,wDAAH,kBAAfK,CAAAA,eAAe,2CAArB,CAGA,GAAMC,CAAAA,gBAAgB,2FAAG,wIACvBN,oBAAoB,CAAC,KAAD,CAApB,CADuB,wDAAH,kBAAhBM,CAAAA,gBAAgB,2CAAtB,CAIA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GAAwB;AAExBxC,aAAa,CAAC,EAAD,CAAb,CACA,GAAIyC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIxC,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAIyC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAX,CACA,GAAI3B,YAAJ,CAAkB,CAChBA,YAAY,CAAC4B,GAAb,2FAAiB,kBAAOC,GAAP,0JACQ3D,CAAAA,KAAK,CAAC,CAC3B4D,MAAM,CAAE,KADmB,CAE3BC,GAAG,CAAEF,GAAG,CAACE,GAFkB,CAG3BC,YAAY,CAAE,MAHa,CAAD,CADb,QACTC,QADS,uCAMTR,CAAAA,MAAM,CAACS,IAAP,CACJ,GAAIC,CAAAA,IAAJ,CAAS,CAACF,QAAQ,CAACG,IAAV,CAAT,mBAAqC5D,MAAM,EAA3C,SAAqD,CACnD6D,IAAI,CAAEJ,QAAQ,CAACG,IAAT,CAAcC,IAD+B,CAEnDC,YAAY,CAAEZ,IAFqC,CAArD,CADI,CANS,yDAAjB,iEAaD,CAEDa,UAAU,CAAC,UAAM,CACf,GAAId,MAAJ,CAAY,CACVA,MAAM,CAACe,OAAP,CAAe,SAACX,GAAD,CAAS,CACtB5C,KAAK,CAACiD,IAAN,CAAWL,GAAX,EACD,CAFD,EAGD,CAED,GAAIY,CAAAA,QAAQ,WAAOxD,KAAP,oBAAiBmB,IAAjB,qBAA0BmB,KAAK,CAACmB,MAAN,CAAazD,KAAvC,EAAZ,CAEAC,QAAQ,WAAKD,KAAL,oBAAemB,IAAf,qBAAwBmB,KAAK,CAACmB,MAAN,CAAazD,KAArC,GAAR,CACAoB,OAAO,CAAC,SAACsC,SAAD,qCAAmBA,SAAnB,qBAAiCpB,KAAK,CAACmB,MAAN,CAAazD,KAA9C,IAAD,CAAP,CACAG,QAAQ,GAXO,2BAcb,GAAIwD,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CAA+B;AAC/BD,MAAM,CAACE,aAAP,CAAqBL,QAAQ,CAACM,CAAD,CAA7B,EAAmC;AACnCH,MAAM,CAACI,SAAP,CAAmB,UAAM,CACvB;AACAhE,aAAa,CAAC,SAAC2D,SAAD,qCAAmBA,SAAnB,GAA8BC,MAAM,CAACK,MAArC,IAAD,CAAb,CACA;AACD,CAJD,CAhBa,EAaf,IAAK,GAAIF,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGN,QAAQ,CAACS,MAA7B,CAAqCH,CAAC,EAAtC,CAA0C,SAQzC,CACF,CAtBS,CAsBP,EAtBO,CAAV,CAuBD,CA9CD,CAgDA,GAAMI,CAAAA,iBAAiB,2FAAG,kBAAOC,KAAP,sIACxB,GAAI,CACF,GAAIpD,YAAJ,CAAkB,CAChBA,YAAY,CAACqD,MAAb,CAAoBD,KAApB,CAA2B,CAA3B,EACAnD,eAAe,oBAAKD,YAAL,EAAf,CACD,CACD,GAAIA,YAAY,EAAIA,YAAY,CAACkD,MAAb,GAAwB,CAA5C,CAA+C,CAC7CjD,eAAe,GAChB,CACD,GAAIlB,UAAJ,CAAgB,CACdA,UAAU,CAACsE,MAAX,CAAkBD,KAAlB,CAAyB,CAAzB,EACApE,aAAa,oBAAKD,UAAL,EAAb,CACD,CACD,GAAIA,UAAU,EAAIA,UAAU,CAACmE,MAAX,GAAsB,CAAxC,CAA2C,CACzClE,aAAa,GACd,CAED,GAAIoB,IAAJ,CAAU,CACRA,IAAI,CAACiD,MAAL,CAAYD,KAAZ,CAAmB,CAAnB,EACA/C,OAAO,oBAAKD,IAAL,EAAP,CACD,CAEGsB,IArBF,CAqBS,GAAIC,CAAAA,IAAJ,EArBT,CAsBE2B,MAtBF,CAsBW,EAtBX,CAuBF,GAAItD,YAAJ,CAAkB,CAChBA,YAAY,CAACwC,OAAb,2FAAqB,kBAAOX,GAAP,+JACI0B,CAAAA,KAAK,CAAC1B,GAAG,CAACE,GAAL,CADT,QACbE,QADa,uCAEAA,CAAAA,QAAQ,CAACuB,IAAT,EAFA,QAEbpB,IAFa,gBAGnBkB,MAAM,CAACpB,IAAP,CACE,GAAIC,CAAAA,IAAJ,CAAS,CAACC,IAAD,CAAT,mBAA4B5D,MAAM,EAAlC,SAA4C,CAC1C6D,IAAI,CAAE,WADoC,CAE1CC,YAAY,CAAEZ,IAF4B,CAA5C,CADF,EAHmB,wDAArB,kEAUAxC,QAAQ,CAACoE,MAAD,CAAR,CACD,CACD,GAAIrE,KAAJ,CAAW,CACTwE,OAAO,CAACC,GAAR,CAAY,GAAZ,EACAzE,KAAK,CAACoE,MAAN,CAAaD,KAAb,CAAoB,CAApB,EACAlE,QAAQ,oBAAKD,KAAL,EAAR,CACD,CACF,CAAC,MAAO0E,GAAP,CAAY,CACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ,EACD,CA5CuB,wDAAH,kBAAjBR,CAAAA,iBAAiB,8CAAvB,CA+CA,GAAMS,CAAAA,IAAI,2FAAG,wJACXjE,gBAAgB,CAAC,IAAD,CAAhB,CACAL,WAAW,CAAC,KAAD,CAAX,CACImC,MAHO,CAGE,EAHF,CAIPC,IAJO,CAIA,GAAIC,CAAAA,IAAJ,EAJA,CAKX,GAAI3B,YAAJ,CAAkB,CAChBA,YAAY,CAAC4B,GAAb,4FAAiB,kBAAOC,GAAP,0JACQ3D,CAAAA,KAAK,CAAC,CAC3B4D,MAAM,CAAE,KADmB,CAE3BC,GAAG,CAAEF,GAAG,CAACE,GAFkB,CAG3BC,YAAY,CAAE,MAHa,CAAD,CADb,QACTC,QADS,uCAMTR,CAAAA,MAAM,CAACS,IAAP,CACJ,GAAIC,CAAAA,IAAJ,CAAS,CAACF,QAAQ,CAACG,IAAV,CAAT,mBAAqC5D,MAAM,EAA3C,SAAqD,CACnD6D,IAAI,CAAEJ,QAAQ,CAACG,IAAT,CAAcC,IAD+B,CAEnDC,YAAY,CAAEZ,IAFqC,CAArD,CADI,CANS,yDAAjB,mEAaD,CACDa,UAAU,CAAC,UAAM,CACfrD,QAAQ,WAAKuC,MAAL,EAAR,CACD,CAFS,CAEP,EAFO,CAAV,CApBW,wDAAH,kBAAJmC,CAAAA,IAAI,2CAAV,CAyBA,GAAMC,CAAAA,UAAU,4FAAG,mBAAOC,SAAP,qKAEXC,QAFW,CAEA,GAAIC,CAAAA,QAAJ,EAFA,CAGf3F,CAAC,CAACmE,OAAF,CAAUvD,KAAV,CAAiB,SAACgF,IAAD,CAAU,CACzBF,QAAQ,CAACG,MAAT,CAAgB,cAAhB,CAAgCD,IAAhC,EACD,CAFD,EAGAF,QAAQ,CAACG,MAAT,CAAgB,iBAAhB,CAAmCpE,eAAnC,EACAiE,QAAQ,CAACG,MAAT,CAAgB,cAAhB,CAAgClE,YAAhC,EAEAG,UAAU,CAAC,IAAD,CAAV,CATe,wBAUWjC,CAAAA,KAAK,CAACiG,IAAN,iEACiCL,SADjC,EAExBC,QAFwB,CAVX,QAUTK,WAVS,iBAeftF,oBAAoB,GACpBuB,OAAO,CAAC,EAAD,CAAP,CACArB,aAAa,GACbE,QAAQ,GACRS,gBAAgB,CAAC,KAAD,CAAhB,CACAQ,UAAU,CAAC,KAAD,CAAV,CApBe,yFAsBfsD,OAAO,CAACC,GAAR,gBAtBe,yEAAH,kBAAVG,CAAAA,UAAU,+CAAhB,CA0BA,GAAMQ,CAAAA,EAAE,4FAAG,6IACT,GAAI,CACF,GAAIzF,WAAJ,CAAiB,CACfmB,kBAAkB,CAACnB,WAAW,CAACgB,WAAb,CAAlB,CACAK,eAAe,CAACrB,WAAW,CAAC0F,YAAb,CAAf,CACD,CACF,CAAC,MAAOX,GAAP,CAAY,CACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ,EACD,CARQ,0DAAH,kBAAFU,CAAAA,EAAE,4CAAR,CAUAtG,SAAS,CAAC,UAAM,CACdsG,EAAE,GACH,CAFQ,CAEN,CAACzF,WAAD,CAFM,CAAT,CAIA,mBACE,qBACGA,WAAW,cACV,aAAK,SAAS,CAAC,kBAAf,wBACE,YAAK,KAAK,CAAC,IAAX,EADF,cAEE,aAAK,SAAS,CAAC,qBAAf,wBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,YAAK,SAAS,CAAC,4BAAf,UACGA,WAAW,CAAC2F,QAAZ,cACC,YACE,SAAS,CAAC,iCADZ,CAEE,GAAG,WAAK3F,WAAW,CAAC2F,QAAZ,CAAqBxC,GAA1B,CAFL,EADD,cAMC,YACE,SAAS,CAAC,iCADZ,CAEE,GAAG,CAAC,kBAFN,EAPJ,EADF,cAcE,aAAK,SAAS,CAAC,sBAAf,WACGnD,WAAW,CAAG,GAAH,CAAS,IADvB,CAEGA,WAAW,CAAC4F,QAFf,cAGE,YAAK,SAAS,CAAC,mBAAf,EAHF,cAIE,cAAM,SAAS,CAAC,sBAAhB,WACG,GADH,CAEGpG,MAAM,CAAC,GAAIuD,CAAAA,IAAJ,CAAS/C,WAAW,CAAC6F,QAAZ,CAAqBC,OAArB,CAA+B,IAAxC,CAAD,CAAN,CACEC,OADF,GAEEC,OAFF,EAFH,CAIgB,GAJhB,GAJF,GAdF,CAyBG5D,IAAI,EAAIpC,WAAW,CAACiG,MAAZ,EAAsB7D,IAAI,CAAC8D,GAAnC,cACC,oCACE,aAAK,SAAS,CAAC,oCAAf,wBACE,YACE,OAAO,CAAEvF,OADX,CAEE,SAAS,CAAC,4BAFZ,uBAIE,YACE,SAAS,CAAC,0BADZ,CAEE,GAAG,CAAC,kBAFN,CAGE,GAAG,CAAC,QAHN,EAJF,EADF,cAYE,YACE,SAAS,oCACPF,QAAQ,CAAG,QAAH,CAAc,UADf,CADX,uBAKE,YAAI,SAAS,CAAC,6BAAd,wBACE,WAAI,SAAS,CAAC,6BAAd,uBACE,UACE,SAAS,CAAC,4BADZ,CAEE,OAAO,CAAE,yBAAMuE,CAAAA,IAAI,CAAChF,WAAW,CAACkF,SAAb,CAAV,EAFX,4FADF,EADF,cASE,WAAI,SAAS,CAAC,6BAAd,uBACE,WACE,SAAS,CAAC,4BADZ,CAEE,OAAO,CAAE,yBACPnD,CAAAA,iBAAiB,CAAC/B,WAAW,CAACkF,SAAb,CAAjB,CACAjD,mBAAmB,CAACjC,WAAD,CADnB,CAEAU,WAAW,CAAC,KAAD,CAFX,CAGA8B,eAAe,EAJR,EAFX,WASG,GATH,gEAUa,GAVb,GADF,EATF,GALF,EAZF,GADF,cA4CE,KAAC,WAAD,EACE,IAAI,CAAC,eADP,CAEE,SAAS,CAAEN,iBAFb,CAGE,gBAAgB,CAAEO,gBAHpB,CAIE,cAAc,CAAEX,cAJlB,CAKE,gBAAgB,CAAEE,gBALpB,CAME,WAAW,CAAEtB,WANf,CAOE,OAAO,CAAEe,OAPX,CAQE,aAAa,CAAErB,aARjB,CASE,QAAQ,CAAEE,QATZ,CAUE,sBAAsB,CAAEL,sBAV1B,EA5CF,GADD,CA0DG,IAnFN,GADF,cAuFE,aAvFF,CAwFGqB,OAAO,cACN,kCACE,KAAC,cAAD,EAAgB,OAAO,CAAEA,OAAzB,EADF,EADM,CAIJR,aAAa,cACf,aAAK,SAAS,CAAC,eAAf,wBACE,aAAK,SAAS,CAAC,kBAAf,WACG,CAACM,YAAD,EAAiB,CAACjB,UAAlB,cACC,YAAK,SAAS,CAAC,kCAAf,uBACE,sCACE,YACE,SAAS,CAAC,oBADZ,CAEE,GAAG,CAAC,iBAFN,EADF,cAKE,cACE,EAAE,CAAC,WADL,CAEE,SAAS,CAAC,oBAFZ,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAEuC,UAJZ,CAKE,QAAQ,KALV,CAME,MAAM,CAAC,mCANT,EALF,GADF,EADD,cAkBC,cAnBJ,cAsBE,YACE,SAAS,CAAC,qBADZ,CAEE,SAAS,CAAC,8BAFZ,uBAIE,iBACE,IAAI,CAAC,GADP,CAEE,IAAI,CAAC,IAFP,CAGE,SAAS,CAAC,yBAHZ,CAIE,WAAW,CAAC,qGAJd,CAKE,KAAK,CAAExB,eALT,CAME,QAAQ,CAAE,kBAACiF,CAAD,CAAO,CACfhF,kBAAkB,CAACgF,CAAC,CAACrC,MAAF,CAASsC,KAAV,CAAlB,CACD,CARH,EAJF,EAtBF,cAsCE,YAAK,SAAS,CAAC,0BAAf,uBACE,eACE,SAAS,CAAC,0BADZ,CAEE,OAAO,CAAE,yBAAMnB,CAAAA,UAAU,CAACjF,WAAW,CAACkF,SAAb,CAAhB,EAFX,kDADF,EAtCF,GADF,cAiDE,kCACE,aAAK,SAAS,CAAC,sBAAf,WACG/E,UAAU,CACPA,UAAU,CAAC6C,GAAX,CAAe,SAACqD,eAAD,CAAkB7B,KAAlB,CAA4B,CACzC,mBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,YAEE,SAAS,CAAC,mBAFZ,CAGE,GAAG,CAAC,YAHN,CAIE,GAAG,CAAE6B,eAJP,EACO7B,KADP,CADF,cAOE,aAAM,SAAS,CAAC,mBAAhB,uBACE,YACE,SAAS,CAAC,mBADZ,CAEE,GAAG,CAAC,kBAFN,CAGE,OAAO,CAAE,yBAAMD,CAAAA,iBAAiB,CAACC,KAAD,CAAvB,EAHX,EADF,EAPF,GADF,CAiBD,CAlBD,CADO,CAoBPpD,YAAY,CACZA,YAAY,CACVA,YAAY,CAAC4B,GAAb,CAAiB,SAACC,GAAD,CAAMuB,KAAN,CAAgB,CAC/B,mBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,YACE,SAAS,CAAC,mBADZ,CAEE,GAAG,CAAEvB,GAAG,CAACE,GAFX,CAGE,OAAO,CAAE,yBACPtB,CAAAA,aAAa,CAACoB,GAAG,CAACE,GAAL,CAAb,CAAwBb,eAAe,EADhC,EAHX,EADF,cAQE,aAAM,SAAS,CAAC,mBAAhB,uBACE,YACE,SAAS,CAAC,mBADZ,CAEE,GAAG,CAAC,kBAFN,CAGE,OAAO,CAAE,yBAAMiC,CAAAA,iBAAiB,CAACC,KAAD,CAAvB,EAHX,EADF,EARF,GADF,CAkBD,CAnBD,CADU,CAqBV,IAtBU,CAuBZ,IA5CN,CA8CGpD,YAAY,EAAIjB,UAAhB,cACC,aAAK,SAAS,CAAC,wBAAf,wBACE,eAAO,SAAS,CAAC,yBAAjB,wBACE,YACE,SAAS,CAAC,yBADZ,CAEE,GAAG,CAAC,gBAFN,EADF,cAME,cACE,EAAE,CAAC,WADL,CAEE,SAAS,CAAC,oBAFZ,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAEuC,UAJZ,CAKE,QAAQ,KALV,CAME,MAAM,CAAC,mCANT,EANF,GADF,CAeW,GAfX,GADD,CAkBG,IAhEN,GADF,EAjDF,GADe,cAwHf,aAAK,SAAS,CAAC,0BAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,UAAiC1C,WAAW,CAACgB,WAA7C,EADF,cAEE,aAAK,SAAS,CAAC,sBAAf,WACGI,YAAY,CACTA,YAAY,CAAC4B,GAAb,CAAiB,SAACC,GAAD,CAAS,CACxB,mBACE,YAAK,SAAS,CAAC,uBAAf,uBACE,YACE,SAAS,CAAC,oBADZ,CAEE,GAAG,WAAKA,GAAG,CAACE,GAAT,CAFL,CAGE,OAAO,CAAE,yBACPtB,CAAAA,aAAa,CAACoB,GAAG,CAACE,GAAL,CAAb,CAAwBb,eAAe,EADhC,EAHX,EADF,EADF,CAWD,CAZD,CADS,CAcT,IAfN,cAgBE,KAAC,UAAD,EACE,MAAM,CAAEZ,MADV,CAEE,eAAe,CAAEY,eAFnB,CAGE,gBAAgB,CAAEC,gBAHpB,CAIE,UAAU,CAAEX,UAJd,EAhBF,GAFF,GApNJ,GAFF,GADU,CAoPR,IArPN,EADF,CAyPD,CAjcD,CAkcA,cAAe7B,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport Axios from \"axios\";\r\nimport usercontext from \"../context/usercontext\";\r\nimport \"./Listcomment2.css\";\r\nimport * as moment from \"moment\";\r\nimport \"moment/locale/th\";\r\nimport _ from \"lodash\";\r\nimport ClipLoaderEdit from \"./clipLoaderEdit\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Modalimage from \"./Modalimage\";\r\nimport Modaldelete from \"./Modaldelete\";\r\nconst Listcomment2 = ({\r\n  commentmore,\r\n  handledeletetorerender,\r\n  handleedittorerender,\r\n}) => {\r\n  const [imagesFile, setImagesFile] = useState(); //สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\r\n  const [files, Setfiles] = useState();\r\n  const [error, Seterror] = useState();\r\n  const [isActive, setIsActive] = useState(false);\r\n  const onClick = () => setIsActive(!isActive);\r\n  const [item, Setitem] = useState([]);\r\n  const [checkedittext, Setcheckedittext] = useState(false);\r\n  const [textcomment, Settextcomment] = useState();\r\n  const [edittextcomment, Setedittextcomment] = useState();\r\n  const [imagecomment, Setimagecomment] = useState();\r\n  const [loading, Setloading] = useState();\r\n  const [fuck, Setfuck] = useState([]);\r\n  const [isopen, Setisopen] = useState(false);\r\n  const [imagemodal, Setimagemodal] = useState();\r\n\r\n  const [modalcommentid, Setmodalcommentid] = useState();\r\n  const [modalcommentmore, Setmodalcommentmore] = useState();\r\n  const [isOpenModalDelete, SetisOpenModalDelete] = useState(false);\r\n\r\n  let { user, setUser } = useContext(usercontext);\r\n\r\n  const handleopenmodal = async () => {\r\n    Setisopen(true);\r\n  };\r\n  const handleclosemodal = async () => {\r\n    Setisopen(false);\r\n  };\r\n\r\n  const handlemodalopen = async () => {\r\n    SetisOpenModalDelete(true);\r\n  };\r\n  const handlemodalclose = async () => {\r\n    SetisOpenModalDelete(false);\r\n  };\r\n\r\n  const FileUpload = (event) => {\r\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\r\n\r\n    setImagesFile([]);\r\n    var myfuck = [];\r\n    var files = [];\r\n    let date = new Date();\r\n    if (imagecomment) {\r\n      imagecomment.map(async (doc) => {\r\n        const response = await Axios({\r\n          method: \"get\",\r\n          url: doc.url,\r\n          responseType: \"blob\",\r\n        });\r\n        await myfuck.push(\r\n          new File([response.data], `filename${uuidv4()}.png`, {\r\n            type: response.data.type,\r\n            lastModified: date,\r\n          })\r\n        );\r\n      });\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (myfuck) {\r\n        myfuck.forEach((doc) => {\r\n          files.push(doc);\r\n        });\r\n      }\r\n\r\n      let filesnew = [...files, ...fuck, ...event.target.files];\r\n\r\n      Setfiles([...files, ...fuck, ...event.target.files]);\r\n      Setfuck((prevState) => [...prevState, ...event.target.files]);\r\n      Seterror();\r\n\r\n      for (var i = 0; i < filesnew.length; i++) {\r\n        let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\r\n        reader.readAsDataURL(filesnew[i]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\r\n        reader.onloadend = () => {\r\n          // ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\r\n          setImagesFile((prevState) => [...prevState, reader.result]);\r\n          //  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\r\n        };\r\n      }\r\n    }, 50);\r\n  };\r\n\r\n  const handledeleteimage = async (index) => {\r\n    try {\r\n      if (imagecomment) {\r\n        imagecomment.splice(index, 1);\r\n        Setimagecomment([...imagecomment]);\r\n      }\r\n      if (imagecomment && imagecomment.length === 0) {\r\n        Setimagecomment();\r\n      }\r\n      if (imagesFile) {\r\n        imagesFile.splice(index, 1);\r\n        setImagesFile([...imagesFile]);\r\n      }\r\n      if (imagesFile && imagesFile.length === 0) {\r\n        setImagesFile();\r\n      }\r\n\r\n      if (fuck) {\r\n        fuck.splice(index, 1);\r\n        Setfuck([...fuck]);\r\n      }\r\n\r\n      let date = new Date();\r\n      var myFile = [];\r\n      if (imagecomment) {\r\n        imagecomment.forEach(async (doc) => {\r\n          const response = await fetch(doc.url);\r\n          const data = await response.blob();\r\n          myFile.push(\r\n            new File([data], `filename${uuidv4()}.png`, {\r\n              type: \"image/png\",\r\n              lastModified: date,\r\n            })\r\n          );\r\n        });\r\n        Setfiles(myFile);\r\n      }\r\n      if (files) {\r\n        console.log(\"d\");\r\n        files.splice(index, 1);\r\n        Setfiles([...files]);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const edit = async () => {\r\n    Setcheckedittext(true);\r\n    setIsActive(false);\r\n    var myfuck = [];\r\n    let date = new Date();\r\n    if (imagecomment) {\r\n      imagecomment.map(async (doc) => {\r\n        const response = await Axios({\r\n          method: \"get\",\r\n          url: doc.url,\r\n          responseType: \"blob\",\r\n        });\r\n        await myfuck.push(\r\n          new File([response.data], `filename${uuidv4()}.png`, {\r\n            type: response.data.type,\r\n            lastModified: date,\r\n          })\r\n        );\r\n      });\r\n    }\r\n    setTimeout(() => {\r\n      Setfiles([...myfuck]);\r\n    }, 50);\r\n  };\r\n\r\n  const handleedit = async (commentid) => {\r\n    try {\r\n      let formdata = new FormData();\r\n      _.forEach(files, (file) => {\r\n        formdata.append(\"photocomment\", file);\r\n      });\r\n      formdata.append(\"edittextcomment\", edittextcomment);\r\n      formdata.append(\"photocomment\", imagecomment);\r\n\r\n      Setloading(true);\r\n      const editcomment = await Axios.post(\r\n        `https://monkeyfruad01.herokuapp.com/post/edit/comment/${commentid}`,\r\n        formdata\r\n      );\r\n\r\n      handleedittorerender();\r\n      Setfuck([]);\r\n      setImagesFile();\r\n      Setfiles();\r\n      Setcheckedittext(false);\r\n      Setloading(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const gg = async () => {\r\n    try {\r\n      if (commentmore) {\r\n        Setedittextcomment(commentmore.textcomment);\r\n        Setimagecomment(commentmore.photocomment);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    gg();\r\n  }, [commentmore]);\r\n\r\n  return (\r\n    <div>\r\n      {commentmore ? (\r\n        <div className=\"mypostcommentrow\">\r\n          <div class=\"vl\"></div>\r\n          <div className=\"mypost-comment-img1\">\r\n            <div className=\"header-mypost-comment\">\r\n              <div className=\"mypost-profilecomment-img1\">\r\n                {commentmore.photoURL ? (\r\n                  <img\r\n                    className=\"img-circle profile-listcomment2\"\r\n                    src={`${commentmore.photoURL.url}`}\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    className=\"img-circle profile-listcomment2\"\r\n                    src=\"/img/profile.png\"\r\n                  />\r\n                )}\r\n              </div>\r\n              <div className=\"mypost-comment-name1\">\r\n                {commentmore ? \"@\" : null}\r\n                {commentmore.username}\r\n                <div className=\"none-listcomment2\"></div>\r\n                <span className=\"mypost-comment-time1\">\r\n                  {\" \"}\r\n                  {moment(new Date(commentmore.datetime.seconds * 1000))\r\n                    .startOf()\r\n                    .fromNow()}{\" \"}\r\n                </span>\r\n              </div>\r\n              {user && commentmore.userid == user.uid ? (\r\n                <div>\r\n                  <div className=\"menu-containermypostcommentsetting\">\r\n                    <div\r\n                      onClick={onClick}\r\n                      className=\"mypostcommentbuttonsetting\"\r\n                    >\r\n                      <img\r\n                        className=\"mypostcommentimg-setting\"\r\n                        src=\"/img/setting.png\"\r\n                        alt=\"avatar\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`mypostcommentmenusetting ${\r\n                        isActive ? \"active\" : \"inactive\"\r\n                      }`}\r\n                    >\r\n                      <ul className=\"ul-mypostcommentmenusetting\">\r\n                        <li className=\"li-mypostcommentmenusetting\">\r\n                          <a\r\n                            className=\"a-mypostcommentmenusetting\"\r\n                            onClick={() => edit(commentmore.commentid)}\r\n                          >\r\n                            แก้ไขคอมเมนต์\r\n                          </a>\r\n                        </li>\r\n                        <li className=\"li-mypostcommentmenusetting\">\r\n                          <a\r\n                            className=\"a-mypostcommentmenusetting\"\r\n                            onClick={() => (\r\n                              Setmodalcommentid(commentmore.commentid),\r\n                              Setmodalcommentmore(commentmore),\r\n                              setIsActive(false),\r\n                              handlemodalopen()\r\n                            )}\r\n                          >\r\n                            {\" \"}\r\n                            ลบคอมเมนต์{\" \"}\r\n                          </a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                  <Modaldelete\r\n                    text=\"deletecomment\"\r\n                    openmodal={isOpenModalDelete}\r\n                    handlemodalclose={handlemodalclose}\r\n                    modalcommentid={modalcommentid}\r\n                    modalcommentmore={modalcommentmore}\r\n                    setIsActive={setIsActive}\r\n                    Setfuck={Setfuck}\r\n                    setImagesFile={setImagesFile}\r\n                    Setfiles={Setfiles}\r\n                    handledeletetorerender={handledeletetorerender}\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n\r\n            <br />\r\n            {loading ? (\r\n              <div>\r\n                <ClipLoaderEdit loading={loading} />\r\n              </div>\r\n            ) : checkedittext ? (\r\n              <div className=\"commentmypost\">\r\n                <div className=\"commentboxmypost\">\r\n                  {!imagecomment && !imagesFile ? (\r\n                    <div className=\"container-img-holder-imgpreview1\">\r\n                      <label>\r\n                        <img\r\n                          className=\"uploadprovemypost1\"\r\n                          src=\"/img/addimg.png\"\r\n                        />\r\n                        <input\r\n                          id=\"FileInput\"\r\n                          className=\"uploadspostcomment\"\r\n                          type=\"file\"\r\n                          onChange={FileUpload}\r\n                          multiple\r\n                          accept=\"image/png, image/jpeg , image/jpg\"\r\n                        />\r\n                      </label>\r\n                    </div>\r\n                  ) : (\r\n                    <div></div>\r\n                  )}\r\n\r\n                  <div\r\n                    className=\"mypost-writecommemt\"\r\n                    controlId=\"exampleForm.ControlTextarea1\"\r\n                  >\r\n                    <textarea\r\n                      rows=\"3\"\r\n                      cols=\"15\"\r\n                      className=\"inputlistcommentmypost2\"\r\n                      placeholder=\"เขียนความคิดเห็น...\"\r\n                      value={edittextcomment}\r\n                      onChange={(e) => {\r\n                        Setedittextcomment(e.target.value);\r\n                      }}\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"buttoncommentmypostsave1\">\r\n                    <button\r\n                      className=\"buttoncommentmypostsave2\"\r\n                      onClick={() => handleedit(commentmore.commentid)}\r\n                    >\r\n                      บันทึก\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <div className=\"imgcommentitemmypost\">\r\n                    {imagesFile\r\n                      ? imagesFile.map((imagePreviewUrl, index) => {\r\n                          return (\r\n                            <div className=\"postdeletemypost\">\r\n                              <img\r\n                                key={index}\r\n                                className=\"imgpreviewmypost1\"\r\n                                alt=\"previewImg\"\r\n                                src={imagePreviewUrl}\r\n                              />\r\n                              <span className=\"deleteimgmyposts1\">\r\n                                <img\r\n                                  className=\"deleteimgmyposts2\"\r\n                                  src=\"/img/delete2.png\"\r\n                                  onClick={() => handledeleteimage(index)}\r\n                                />\r\n                              </span>\r\n                            </div>\r\n                          );\r\n                        })\r\n                      : imagecomment\r\n                      ? imagecomment\r\n                        ? imagecomment.map((doc, index) => {\r\n                            return (\r\n                              <div className=\"postdeletemypost\">\r\n                                <img\r\n                                  className=\"imgpreviewmypost1\"\r\n                                  src={doc.url}\r\n                                  onClick={() => (\r\n                                    Setimagemodal(doc.url), handleopenmodal()\r\n                                  )}\r\n                                />\r\n                                <span className=\"deleteimgmyposts1\">\r\n                                  <img\r\n                                    className=\"deleteimgmyposts2\"\r\n                                    src=\"/img/delete2.png\"\r\n                                    onClick={() => handledeleteimage(index)}\r\n                                  />\r\n                                </span>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        : null\r\n                      : null}\r\n\r\n                    {imagecomment || imagesFile ? (\r\n                      <div className=\"uploadproveeditmyposts\">\r\n                        <label className=\"uploadproveeditmyposts1\">\r\n                          <img\r\n                            className=\"uploadproveeditmyposts2\"\r\n                            src=\"/img/last1.png\"\r\n                          />\r\n\r\n                          <input\r\n                            id=\"FileInput\"\r\n                            className=\"uploadspostcomment\"\r\n                            type=\"file\"\r\n                            onChange={FileUpload}\r\n                            multiple\r\n                            accept=\"image/png, image/jpeg , image/jpg\"\r\n                          />\r\n                        </label>{\" \"}\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"mypost-comment-comments2\">\r\n                <div className=\"mypostcomment1\">{commentmore.textcomment}</div>\r\n                <div className=\"imglistcommentmypost\">\r\n                  {imagecomment\r\n                    ? imagecomment.map((doc) => {\r\n                        return (\r\n                          <div className=\"imglistcommentmypost1\">\r\n                            <img\r\n                              className=\"listcommentmypost2\"\r\n                              src={`${doc.url}`}\r\n                              onClick={() => (\r\n                                Setimagemodal(doc.url), handleopenmodal()\r\n                              )}\r\n                            />\r\n                          </div>\r\n                        );\r\n                      })\r\n                    : null}\r\n                  <Modalimage\r\n                    isopen={isopen}\r\n                    handleopenmodal={handleopenmodal}\r\n                    handleclosemodal={handleclosemodal}\r\n                    imagemodal={imagemodal}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\nexport default Listcomment2;\r\n"]},"metadata":{},"sourceType":"module"}