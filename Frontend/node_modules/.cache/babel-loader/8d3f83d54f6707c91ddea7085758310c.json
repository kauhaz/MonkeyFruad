{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useMemo}from\"react\";import{MDBNavbar,MDBNavbarBrand,MDBNavbarNav,MDBNavItem,MDBNavbarToggler,MDBCollapse,MDBDropdown,MDBDropdownToggle,MDBDropdownMenu,MDBDropdownItem}from\"mdbreact\";import{BrowserRouter as Router,useHistory}from\"react-router-dom\";import\"./navnew.css\";import{auth}from\"../Frontfirebase\";import usercontext from\"../context/usercontext\";import axios from\"axios\";import*as moment from\"moment\";import\"moment/locale/th\";import{Nav}from\"react-bootstrap\";var NavbarPage=function NavbarPage(_ref){var SetshowDropdown=_ref.SetshowDropdown,showDropdown=_ref.showDropdown;var _useContext=useContext(usercontext),user=_useContext.user;var _useState=useState(),_useState2=_slicedToArray(_useState,2),displayname=_useState2[0],setDisplayname=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),admin=_useState4[0],setAdmin=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isOpen=_useState8[0],setIsopen=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),search=_useState10[0],Setsearch=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),searching=_useState12[0],Setsearching=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),lastsearch=_useState14[0],Setlastsearch=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),refresh=_useState16[0],Setrefresh=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),allpost=_useState18[0],Setallpost=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),countNoti=_useState20[0],setCountNoti=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),noti=_useState22[0],setNoti=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),haha=_useState24[0],Sethaha=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),error=_useState26[0],Seterror=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),hideCountNoti=_useState28[0],SetHideCountNoti=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),hideCountNotiAlways=_useState30[0],SetHideCountNotiAlways=_useState30[1];var history=useHistory();var i=0;//forsearch\nvar logout=function logout(){auth.signOut().then(function(){console.log(\"Signout\");}).catch(function(err){console.log(err);});};var toggleCollapse=function toggleCollapse(){setIsopen(!isOpen);};var notiChangeClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(countNoti.length!=0)){_context.next=4;break;}SetHideCountNoti(true);_context.next=4;return axios.post(\"https://monkeyfruad01.herokuapp.com/post/notichangeclick/\".concat(user.uid),{countNoti:countNoti});case 4:case\"end\":return _context.stop();}}},_callee);}));return function notiChangeClick(){return _ref2.apply(this,arguments);};}();var notiChangeRead=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(notiId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"https://monkeyfruad01.herokuapp.com/post/notificationread/\".concat(notiId));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function notiChangeRead(_x){return _ref3.apply(this,arguments);};}();var handlesearch=function handlesearch(){try{if(search){var getdata=allpost.filter(function(doc){return doc.name.toLowerCase().includes(search.toLowerCase())||doc.surname.toLowerCase().includes(search.toLowerCase())||doc.accountnumber.includes(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).includes(search.toLowerCase());});Setsearch(\"\");if(getdata){console.log(getdata);history.push({pathname:\"/entersearch\",search:\"?are you ok\",state:{getdata:getdata,search:search}});}}}catch(err){console.log(err);}};var adminhandlesearch=function adminhandlesearch(){try{if(search){var getdata=allpost.filter(function(doc){return doc.name.toLowerCase().includes(search.toLowerCase())||doc.surname.toLowerCase().includes(search.toLowerCase())||doc.accountnumber.includes(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).includes(search.toLowerCase());});Setsearch(\"\");if(getdata){console.log(getdata);history.push({pathname:\"/adminentersearch\",search:\"?are you ok\",state:{getdata:getdata,search:search}});}}}catch(err){console.log(err);}};var initSearch=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var getallthief,getallpost,getthief;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"https://monkeyfruad01.herokuapp.com/thief/thief\");case 3:getallthief=_context3.sent;Setsearching(getallthief.data.item);_context3.next=7;return axios.get(\"https://monkeyfruad01.herokuapp.com/post/post\");case 7:getallpost=_context3.sent;Setallpost(getallpost.data.item);getthief=getallthief.data.item;if(search){Seterror();Setlastsearch(getthief.filter(function(doc){console.log(doc);if((doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase())){Sethaha(true);}if(doc.accountnumber.startsWith(search)){Sethaha(true);}if(doc.name.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}if(doc.surname.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}return doc.name.toLowerCase().startsWith(search.toLowerCase())||doc.surname.toLowerCase().startsWith(search.toLowerCase())||doc.accountnumber.startsWith(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase());}));}if(!search){Setlastsearch();}_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return function initSearch(){return _ref4.apply(this,arguments);};}();var initnoti=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post(\"https://monkeyfruad01.herokuapp.com/post/getnotification/\".concat(user.uid)).then(function(result){setNoti(result.data);}).catch(function(err){console.log(err);});case 2:_context4.next=4;return axios.post(\"https://monkeyfruad01.herokuapp.com/post/getnoticlickfalse/\".concat(user.uid)).then(function(result){if(result.data[0]===undefined){SetHideCountNotiAlways(true);}else{setCountNoti(result.data);}}).catch(function(err){console.log(err);});case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function initnoti(){return _ref5.apply(this,arguments);};}();var initUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post(\"https://monkeyfruad01.herokuapp.com/user/session\",{user:user}).then(function(result){if(result.data.data.role===\"admin\"){setAdmin(true);}setDisplayname(result.data.data.username);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function initUser(){return _ref6.apply(this,arguments);};}();useMemo(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!user){_context6.next=4;break;}initUser();_context6.next=4;return initnoti();case 4:_context6.next=6;return initSearch();case 6:setLoading(false);case 7:case\"end\":return _context6.stop();}}},_callee6);})),[user,search,hideCountNoti]);return loading?\"\":admin?/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"lg\",className:\"navbarnew navbar-expand-lg\",children:[/*#__PURE__*/_jsx(MDBNavbarBrand,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:[/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\" \\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C \"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/report\",children:\"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E07\\u0E32\\u0E19\"})})]}),/*#__PURE__*/_jsxs(MDBNavbarNav,{right:true,children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(\"div\",{className:\" my-0\",children:/*#__PURE__*/_jsx(\"input\",{className:\"box-nav mr-sm-2\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\",\"aria-label\":\"Search\",value:search,onChange:function onChange(e){Setsearch(e.target.value);SetshowDropdown(true);}})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return adminhandlesearch();},className:\"button-nav\",children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{onClick:logout,href:\"/login\",children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ggadmin\",children:[lastsearch?lastsearch.map(function(doc){var thiefid=doc.accountnumber;i++;return/*#__PURE__*/_jsx(\"div\",{className:\"boxsearch-nav\",children:i<=10?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",haha?showDropdown?/*#__PURE__*/_jsx(\"button\",{className:\"search-nav\",onClick:function onClick(){return history.push({pathname:\"/admin/thief/post/\".concat(thiefid),search:\"?are you ok\"}),window.location.reload(true);},children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",doc.name,\" \",doc.surname,\" \",doc.accountnumber]})}):null:null]}):null});}):null,lastsearch?showDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"dropsearch-nav\",onClick:function onClick(){return adminhandlesearch();},children:[\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",search]}):null:null]})]}):/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"md\",className:\"navbarnew\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:[/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,children:\"\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-top1\",children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/post\",children:\"\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/linkruleshow\",children:\"\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"})]})]})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/ranking\",children:\"\\u0E08\\u0E31\\u0E14\\u0E2D\\u0E31\\u0E19\\u0E14\\u0E31\\u0E1A\\u0E04\\u0E19\\u0E42\\u0E01\\u0E07\"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,children:\"\\u0E0A\\u0E48\\u0E27\\u0E22\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-top2\",children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/prevent\",children:\"\\u0E23\\u0E39\\u0E49\\u0E44\\u0E27\\u0E49\\u0E44\\u0E21\\u0E48\\u0E42\\u0E14\\u0E19\\u0E42\\u0E01\\u0E07\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/help\",children:\"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E27\\u0E32\\u0E21\\u0E0A\\u0E48\\u0E27\\u0E22\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"})]})]})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/contractus\",children:\"\\u0E15\\u0E34\\u0E14\\u0E15\\u0E48\\u0E2D\"})})]}),/*#__PURE__*/_jsxs(MDBNavbarNav,{right:true,children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(\"div\",{className:\" my-0\",children:/*#__PURE__*/_jsx(\"input\",{className:\"box-nav mr-sm-2\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\",\"aria-label\":\"Search\",value:search,onChange:function onChange(e){Setsearch(e.target.value);SetshowDropdown(true);}})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlesearch();},className:\"button-nav\",children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-noti\",onClick:function onClick(){return notiChangeClick();},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/img/notification.png\",className:\"noti-logo\"}),hideCountNotiAlways?null:hideCountNoti?null:/*#__PURE__*/_jsx(\"span\",{className:\"badge\",children:countNoti.length})]})}),/*#__PURE__*/_jsx(MDBDropdownMenu,{className:\"dropdown-default dropdown-top-noti\",children:noti.map(function(element,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MDBDropdownItem,{href:\"/mypost/\".concat(element.postid),onClick:function onClick(){return notiChangeRead(element.uid);},children:[element.userCommentData.photoURL?/*#__PURE__*/_jsx(\"img\",{className:\"img-circle\",src:\"\".concat(element.userCommentData.photoURL.url)}):/*#__PURE__*/_jsx(\"img\",{className:\"img-circle\",src:\"/img/profile.png\"}),element.userCommentData.username,/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E15\\u0E48\\u0E2D\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\\u0E02\\u0E2D\\u0E07\\u0E04\\u0E38\\u0E13\"}),moment(new Date(element.date.seconds*1000)).startOf().fromNow(),\" \"]})},index);})})]})}),/*#__PURE__*/_jsx(MDBNavItem,{children:user?/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,left:true,children:displayname}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-bottom\",right:true,children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/profile/\".concat(user.uid),children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/post/history\",children:\"\\u0E1B\\u0E23\\u0E30\\u0E27\\u0E31\\u0E15\\u0E34\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line-nav\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/login\",onClick:logout,children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})]})]}):/*#__PURE__*/_jsx(Nav.Link,{href:\"/login\",children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gg\",children:[lastsearch?lastsearch.map(function(doc){var thiefid=doc.accountnumber;i++;return/*#__PURE__*/_jsx(\"div\",{className:\"boxsearch-nav\",children:i<=10?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",haha?showDropdown?/*#__PURE__*/_jsx(\"button\",{className:\"search-nav\",onClick:function onClick(){return history.push({pathname:\"/thief/post/\".concat(thiefid),search:\"?are you ok\"}),window.location.reload(true);},children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",doc.name,\" \",doc.surname,\" \",doc.accountnumber]})}):null:null]}):null});}):null,lastsearch?showDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"dropsearch-nav\",onClick:function onClick(){return handlesearch();},children:[\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",search]}):null:null]})]});};export default NavbarPage;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/user/components/navnew.js"],"names":["React","useContext","useState","useMemo","MDBNavbar","MDBNavbarBrand","MDBNavbarNav","MDBNavItem","MDBNavbarToggler","MDBCollapse","MDBDropdown","MDBDropdownToggle","MDBDropdownMenu","MDBDropdownItem","BrowserRouter","Router","useHistory","auth","usercontext","axios","moment","Nav","NavbarPage","SetshowDropdown","showDropdown","user","displayname","setDisplayname","admin","setAdmin","loading","setLoading","isOpen","setIsopen","search","Setsearch","searching","Setsearching","lastsearch","Setlastsearch","refresh","Setrefresh","allpost","Setallpost","countNoti","setCountNoti","noti","setNoti","haha","Sethaha","error","Seterror","hideCountNoti","SetHideCountNoti","hideCountNotiAlways","SetHideCountNotiAlways","history","i","logout","signOut","then","console","log","catch","err","toggleCollapse","notiChangeClick","length","post","uid","notiChangeRead","notiId","handlesearch","getdata","filter","doc","name","toLowerCase","includes","surname","accountnumber","push","pathname","state","adminhandlesearch","initSearch","get","getallthief","data","item","getallpost","getthief","startsWith","initnoti","result","undefined","initUser","role","username","e","target","value","map","thiefid","window","location","reload","element","index","postid","userCommentData","photoURL","url","Date","date","seconds","startOf","fromNow"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useMemo } from \"react\";\r\nimport {\r\n  MDBNavbar,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem,\r\n} from \"mdbreact\";\r\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\r\nimport \"./navnew.css\";\r\nimport { auth } from \"../Frontfirebase\";\r\nimport usercontext from \"../context/usercontext\";\r\nimport axios from \"axios\";\r\nimport * as moment from \"moment\";\r\nimport \"moment/locale/th\";\r\nimport { Nav } from \"react-bootstrap\";\r\nconst NavbarPage = ({ SetshowDropdown, showDropdown }) => {\r\n  var { user } = useContext(usercontext);\r\n  const [displayname, setDisplayname] = useState();\r\n  const [admin, setAdmin] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isOpen, setIsopen] = useState(false);\r\n  const [search, Setsearch] = useState();\r\n  const [searching, Setsearching] = useState();\r\n  const [lastsearch, Setlastsearch] = useState();\r\n  const [refresh, Setrefresh] = useState();\r\n  const [allpost, Setallpost] = useState();\r\n  const [countNoti, setCountNoti] = useState([]);\r\n  const [noti, setNoti] = useState([]);\r\n  const [haha, Sethaha] = useState();\r\n  const [error, Seterror] = useState();\r\n  const [hideCountNoti, SetHideCountNoti] = useState(false);\r\n  const [hideCountNotiAlways, SetHideCountNotiAlways] = useState(false);\r\n  let history = useHistory();\r\n  let i = 0; //forsearch\r\n\r\n  const logout = () => {\r\n    auth\r\n      .signOut()\r\n      .then(() => {\r\n        console.log(\"Signout\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const toggleCollapse = () => {\r\n    setIsopen(!isOpen);\r\n  };\r\n  const notiChangeClick = async () => {\r\n    if (countNoti.length != 0) {\r\n      SetHideCountNoti(true);\r\n      await axios.post(\r\n        `https://monkeyfruad01.herokuapp.com/post/notichangeclick/${user.uid}`,\r\n        { countNoti }\r\n      );\r\n    }\r\n  };\r\n  const notiChangeRead = async (notiId) => {\r\n    await axios.post(`https://monkeyfruad01.herokuapp.com/post/notificationread/${notiId}`);\r\n  };\r\n  const handlesearch = () => {\r\n    try {\r\n      if (search) {\r\n        const getdata = allpost.filter((doc) => {\r\n          return (\r\n            doc.name.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.surname.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.accountnumber.includes(search) ||\r\n            (doc.name.toLowerCase() + \" \" + doc.surname.toLowerCase()).includes(\r\n              search.toLowerCase()\r\n            )\r\n          );\r\n        });\r\n        Setsearch(\"\");\r\n        if (getdata) {\r\n          console.log(getdata);\r\n          history.push({\r\n            pathname: \"/entersearch\",\r\n            search: \"?are you ok\",\r\n            state: {\r\n              getdata,\r\n              search,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const adminhandlesearch = () => {\r\n    try {\r\n      if (search) {\r\n        const getdata = allpost.filter((doc) => {\r\n          return (\r\n            doc.name.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.surname.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.accountnumber.includes(search) ||\r\n            (doc.name.toLowerCase() + \" \" + doc.surname.toLowerCase()).includes(\r\n              search.toLowerCase()\r\n            )\r\n          );\r\n        });\r\n        Setsearch(\"\");\r\n        if (getdata) {\r\n          console.log(getdata);\r\n          history.push({\r\n            pathname: \"/adminentersearch\",\r\n            search: \"?are you ok\",\r\n            state: {\r\n              getdata,\r\n              search,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const initSearch = async () => {\r\n    try {\r\n      const getallthief = await axios.get(\r\n        `https://monkeyfruad01.herokuapp.com/thief/thief`\r\n      );\r\n      Setsearching(getallthief.data.item);\r\n      const getallpost = await axios.get(\r\n        `https://monkeyfruad01.herokuapp.com/post/post`\r\n      );\r\n      Setallpost(getallpost.data.item);\r\n      const getthief = getallthief.data.item;\r\n      if (search) {\r\n        Seterror();\r\n        Setlastsearch(\r\n          getthief.filter((doc) => {\r\n            console.log(doc);\r\n            if (\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            ) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.accountnumber.startsWith(search)) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.name.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.surname.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n            return (\r\n              doc.name.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.surname.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.accountnumber.startsWith(search) ||\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            );\r\n          })\r\n        );\r\n      }\r\n      if (!search) {\r\n        Setlastsearch();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const initnoti = async () => {\r\n    await axios\r\n      .post(`https://monkeyfruad01.herokuapp.com/post/getnotification/${user.uid}`)\r\n      .then((result) => {\r\n        setNoti(result.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    await axios\r\n      .post(`https://monkeyfruad01.herokuapp.com/post/getnoticlickfalse/${user.uid}`)\r\n      .then((result) => {\r\n        if (result.data[0] === undefined) {\r\n          SetHideCountNotiAlways(true);\r\n        } else {\r\n          setCountNoti(result.data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const initUser = async () => {\r\n    await axios\r\n      .post(\"https://monkeyfruad01.herokuapp.com/user/session\", {\r\n        user: user,\r\n      })\r\n      .then((result) => {\r\n        if (result.data.data.role === \"admin\") {\r\n          setAdmin(true);\r\n        }\r\n        setDisplayname(result.data.data.username);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  useMemo(async () => {\r\n    if (user) {\r\n      initUser();\r\n     await initnoti();\r\n    }\r\n    await initSearch();\r\n    setLoading(false);\r\n  }, [user, search, hideCountNoti]);\r\n  return loading ? (\r\n    \"\"\r\n  ) : admin ? (\r\n    <Router>\r\n      <MDBNavbar light expand=\"lg\" className=\"navbarnew navbar-expand-lg\">\r\n        <MDBNavbarBrand href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </MDBNavbarBrand>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/\"> จัดการโพสต์ </Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/report\">ดูรายงาน</Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <div className=\" my-0\">\r\n                <input\r\n                  className=\"box-nav mr-sm-2\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาด้วยชื่อหรือเลขที่บัญชี\"\r\n                  aria-label=\"Search\"\r\n                  value={search}\r\n                  onChange={(e) => {\r\n                    Setsearch(e.target.value);\r\n                    SetshowDropdown(true);\r\n                  }}\r\n                />\r\n              </div>\r\n            </MDBNavItem>\r\n\r\n            <button onClick={() => adminhandlesearch()} className=\"button-nav\">\r\n              ค้นหา\r\n            </button>\r\n            <MDBNavItem>\r\n              <Nav.Link onClick={logout} href=\"/login\">\r\n                ออกจากระบบ\r\n              </Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n      <div className=\"ggadmin\">\r\n        {lastsearch\r\n          ? lastsearch.map((doc) => {\r\n              let thiefid = doc.accountnumber;\r\n              i++;\r\n              return (\r\n                <div className=\"boxsearch-nav\">\r\n                  {i <= 10 ? (\r\n                    <div>\r\n                      {\" \"}\r\n                      {haha ? (\r\n                        showDropdown ? (\r\n                          <button\r\n                            className=\"search-nav\"\r\n                            onClick={() => (\r\n                              history.push({\r\n                                pathname: `/admin/thief/post/${thiefid}`,\r\n                                search: \"?are you ok\",\r\n                              }),\r\n                              window.location.reload(true)\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              {\" \"}\r\n                              {doc.name} {doc.surname} {doc.accountnumber}\r\n                            </div>\r\n                          </button>\r\n                        ) : null\r\n                      ) : null}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              );\r\n            })\r\n          : null}\r\n        {lastsearch ? (\r\n          showDropdown ? (\r\n            <div className=\"dropsearch-nav\" onClick={() => adminhandlesearch()}>\r\n              ค้นหา {search}\r\n            </div>\r\n          ) : null\r\n        ) : null}\r\n      </div>\r\n    </Router>\r\n  ) : (\r\n    <Router>\r\n      <MDBNavbar light expand=\"md\" className=\"navbarnew\">\r\n        <Nav.Link href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </Nav.Link>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <MDBDropdown>\r\n                <MDBDropdownToggle nav caret>\r\n                  โพสต์\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu className=\"dropdown-default dropdown-top1\">\r\n                  <MDBDropdownItem href=\"/post\">โพสต์ทั้งหมด</MDBDropdownItem>\r\n                  <MDBDropdownItem href=\"/linkruleshow\">\r\n                    สร้างโพสต์\r\n                  </MDBDropdownItem>\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/ranking\">จัดอันดับคนโกง</Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <MDBDropdown>\r\n                <MDBDropdownToggle nav caret>\r\n                  ช่วยเหลือ\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu className=\"dropdown-default dropdown-top2\">\r\n                  <MDBDropdownItem href=\"/prevent\">\r\n                    รู้ไว้ไม่โดนโกง\r\n                  </MDBDropdownItem>\r\n                  <MDBDropdownItem href=\"/help\">\r\n                    หน่วยงานที่ให้ความช่วยเหลือ\r\n                  </MDBDropdownItem>\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/contractus\">ติดต่อ</Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <div className=\" my-0\">\r\n                <input\r\n                  className=\"box-nav mr-sm-2\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาด้วยชื่อหรือเลขที่บัญชี\"\r\n                  aria-label=\"Search\"\r\n                  value={search}\r\n                  onChange={(e) => {\r\n                    Setsearch(e.target.value);\r\n                    SetshowDropdown(true);\r\n                  }}\r\n                />\r\n              </div>\r\n            </MDBNavItem>\r\n\r\n            <button onClick={() => handlesearch()} className=\"button-nav\">\r\n              ค้นหา\r\n            </button>\r\n\r\n            <MDBNavItem>\r\n              <MDBDropdown>\r\n                <MDBDropdownToggle nav>\r\n                  <div\r\n                    className=\"navbar-noti\"\r\n                    onClick={() => notiChangeClick()}\r\n                  >\r\n                    <img\r\n                      src=\"/img/notification.png\"\r\n                      className=\"noti-logo\"\r\n                    ></img>\r\n                    {hideCountNotiAlways ? null : hideCountNoti ? null : (\r\n                      <span className=\"badge\">{countNoti.length}</span>\r\n                    )}\r\n                  </div>\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu className=\"dropdown-default dropdown-top-noti\">\r\n                  {noti.map((element, index) => {\r\n                    return (\r\n                      <div key={index} >\r\n                        <MDBDropdownItem href={`/mypost/${element.postid}`} onClick={()=> notiChangeRead(element.uid)} >\r\n                          {element.userCommentData.photoURL ? (\r\n                            <img\r\n                              className=\"img-circle\"\r\n                              src={`${element.userCommentData.photoURL.url}`}\r\n                            />\r\n                          ) : (\r\n                            <img\r\n                              className=\"img-circle\"\r\n                              src=\"/img/profile.png\"\r\n                            />\r\n                          )}\r\n                          {element.userCommentData.username}\r\n                          <p>แสดงความคิดเห็นต่อโพสต์ของคุณ</p>\r\n                          {moment(new Date(element.date.seconds * 1000))\r\n                            .startOf()\r\n                            .fromNow()}{\" \"}\r\n                        </MDBDropdownItem>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n\r\n            <MDBNavItem>\r\n              {user ? (\r\n                <MDBDropdown>\r\n                  <MDBDropdownToggle nav caret left>\r\n                    {displayname}\r\n                  </MDBDropdownToggle>\r\n                  <MDBDropdownMenu\r\n                    className=\"dropdown-default dropdown-bottom\"\r\n                    right\r\n                  >\r\n                    <MDBDropdownItem href={`/profile/${user.uid}`}>\r\n                      จัดการโปรไฟล์\r\n                    </MDBDropdownItem>\r\n                    <MDBDropdownItem href=\"/post/history\">\r\n                      ประวัติการโพสต์\r\n                    </MDBDropdownItem>\r\n                    <div className=\"line-nav\"></div>\r\n                    <MDBDropdownItem href=\"/login\" onClick={logout}>\r\n                      ออกจากระบบ\r\n                    </MDBDropdownItem>\r\n                  </MDBDropdownMenu>\r\n                </MDBDropdown>\r\n              ) : (\r\n                <Nav.Link href=\"/login\">เข้าสู่ระบบ</Nav.Link>\r\n              )}\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n      <div className=\"gg\">\r\n        {lastsearch\r\n          ? lastsearch.map((doc) => {\r\n              let thiefid = doc.accountnumber;\r\n              i++;\r\n              return (\r\n                <div className=\"boxsearch-nav\">\r\n                  {i <= 10 ? (\r\n                    <div>\r\n                      {\" \"}\r\n                      {haha ? (\r\n                        showDropdown ? (\r\n                          <button\r\n                            className=\"search-nav\"\r\n                            onClick={() => (\r\n                              history.push({\r\n                                pathname: `/thief/post/${thiefid}`,\r\n                                search: \"?are you ok\",\r\n                              }),\r\n                              window.location.reload(true)\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              {\" \"}\r\n                              {doc.name} {doc.surname} {doc.accountnumber}\r\n                            </div>\r\n                          </button>\r\n                        ) : null\r\n                      ) : null}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              );\r\n            })\r\n          : null}\r\n        {lastsearch ? (\r\n          showDropdown ? (\r\n            <div className=\"dropsearch-nav\" onClick={() => handlesearch()}>\r\n              ค้นหา {search}\r\n            </div>\r\n          ) : null\r\n        ) : null}\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default NavbarPage;\r\n"]},"metadata":{},"sourceType":"module"}